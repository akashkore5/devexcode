---
id: "712345"
title: "Count Reverse Pairs"
slug: "count-reverse-pairs"
difficulty: "Hard"
companyTags: []
tags: []
---

# Count Reverse Pairs

## Summary

The problem "Count Reverse Pairs" involves counting the number of reverse pairs in an array of integers. A pair is considered reverse if its elements are reversed. For example, (1, 2) and (2, 1) are reverse pairs. This problem requires us to write a program that counts the total number of reverse pairs present in the given array.

## Detailed Explanation

To solve this problem, we can use a two-pointer technique. The idea is to sort the input array and then count the number of reverse pairs as we iterate through it. Here's how it works:

1. First, we create an empty list to store the counted reverse pairs.
2. Then, we sort the input array in ascending order using the `sort()` function.
3. Next, we initialize two pointers, `left` and `right`, at the beginning and end of the sorted array respectively.
4. We enter a loop that continues until the `left` pointer meets the `right` pointer.
5. Inside the loop, we count the reverse pairs by checking if the elements at the `left` and `right` pointers are in reverse order. If they are, we increment our count and move both pointers towards each other.
6. We continue this process until all possible reverse pairs have been counted.

The time complexity of this solution is O(n log n) due to the sorting step, where n is the number of elements in the input array. The space complexity is O(1) as we only use a constant amount of extra space to store our count.

Here's an ASCII art diagram illustrating the two-pointer technique:
```
  +-----------+       +-----------+
  |          |       |          |
  |  left    |  right   |          |
  +-----------+       +-----------+
  |         (1, 2)     |         (3, 4)
  |         (1, 2)     |         (3, 4)
  +-----------+       +-----------+
```

## Optimized Solutions

### Java
```java
public class Main {
    public static void main(String[] args) {
        int[] arr = {1, 2, 3, 4, 5};
        System.out.println(countReversePairs(arr));
    }

    public static int countReversePairs(int[] arr) {
        Arrays.sort(arr);
        int count = 0;
        for (int i = 0; i < arr.length - 1; i++) {
            for (int j = arr.length - 1; j > i; j--) {
                if (arr[i] > arr[j]) {
                    count++;
                }
            }
        }
        return count;
    }
}
```

### Python
```python
def count_reverse_pairs(arr):
    arr.sort()
    count = 0
    for i in range(len(arr) - 1):
        for j in range(i + 1, len(arr)):
            if arr[i] > arr[j]:
                count += 1
    return count

arr = [1, 2, 3, 4, 5]
print(count_reverse_pairs(arr))
```

### C++
```cpp
#include <iostream>
#include <vector>
using namespace std;

int countReversePairs(vector<int>& arr) {
    sort(arr.begin(), arr.end());
    int count = 0;
    for (int i = 0; i < arr.size() - 1; i++) {
        for (int j = arr.size() - 1; j > i; j--) {
            if (arr[i] > arr[j]) {
                count++;
            }
        }
    }
    return count;
}

int main() {
    vector<int> arr = {1, 2, 3, 4, 5};
    cout << countReversePairs(arr) << endl;
    return 0;
}
```

### JavaScript
```javascript
function countReversePairs(arr) {
    arr.sort((a, b) => a - b);
    let count = 0;
    for (let i = 0; i < arr.length - 1; i++) {
        for (let j = arr.length - 1; j > i; j--) {
            if (arr[i] > arr[j]) {
                count++;
            }
        }
    }
    return count;
}

let arr = [1, 2, 3, 4, 5];
console.log(countReversePairs(arr));
```