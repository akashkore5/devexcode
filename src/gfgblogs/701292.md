---
id: "701292"
title: "Subarray range with given sum"
slug: "subarray-range-with-given-sum0128"
difficulty: "Medium"
companyTags: []
tags: ["Arrays", "Hash", "Data Structures"]
---

**Subarray Range with Given Sum**
==============================

### Summary
Find all subarrays in a given array that sum up to a certain value. This problem is an extension of the "Minimum Size Subarray Sum" problem, where we need to find all subarrays instead of just one.

### Detailed Explanation
To solve this problem, we can use a hash map (or a dictionary) to store the cumulative sum of elements and their indices. We iterate over the array and for each element, calculate its cumulative sum up to that point. If the cumulative sum minus the given sum is present in our hash map, it means we have found a subarray with the given sum.

Here's a step-by-step breakdown:

1. Initialize an empty hash map `cumulativeSumToIndex`.
2. Iterate over the array and for each element:
   - Calculate its cumulative sum up to that point.
   - If the cumulative sum minus the given sum is present in our hash map, it means we have found a subarray with the given sum.
   - Add this subarray's start index to our result list.
3. Continue iterating until the end of the array.

### Optimized Solutions

#### Java
```java
import java.util.HashMap;
import java.util.Map;

public class SubarrayRange {
    public static int[] findSubarrays(int[] arr, int sum) {
        Map<Integer, Integer> cumulativeSumToIndex = new HashMap<>();
        int cumulativeSum = 0;
        List<Integer> subarrayStartIndices = new ArrayList<>();

        for (int i = 0; i < arr.length; i++) {
            cumulativeSum += arr[i];

            if (cumulativeSum - sum >= 0 && cumulativeSumToIndex.containsKey(cumulativeSum - sum)) {
                subarrayStartIndices.add(cumulativeSumToIndex.get(cumulativeSum - sum));
            }

            cumulativeSumToIndex.put(cumulativeSum, i);
        }

        return subarrayStartIndices.stream().mapToInt(Integer::intValue).toArray();
    }
}
```

#### Python
```python
def find_subarrays(arr, sum):
    cumulative_sum_to_index = {}
    cumulative_sum = 0
    subarray_start_indices = []

    for i in range(len(arr)):
        cumulative_sum += arr[i]

        if cumulative_sum - sum >= 0 and cumulative_sum - sum in cumulative_sum_to_index:
            subarray_start_indices.append(cumulative_sum_to_index[cumulative_sum - sum])

        cumulative_sum_to_index[cumulative_sum] = i

    return [int(x) for x in subarray_start_indices]
```

#### C++
```cpp
#include <unordered_map>
#include <vector>

std::vector<int> findSubarrays(const std::vector<int>& arr, int sum) {
    std::unordered_map<int, int> cumulativeSumToIndex;
    int cumulativeSum = 0;
    std::vector<int> subarrayStartIndices;

    for (int i = 0; i < arr.size(); i++) {
        cumulativeSum += arr[i];

        if (cumulativeSum - sum >= 0 && cumulativeSumToIndex.count(cumulativeSum - sum)) {
            subarrayStartIndices.push_back(cumulativeSumToIndex[cumulativeSum - sum]);
        }

        cumulativeSumToIndex[cumulativeSum] = i;
    }

    return subarrayStartIndices;
}
```

#### JavaScript
```javascript
function findSubarrays(arr, sum) {
    const cumulativeSumToIndex = {};
    let cumulativeSum = 0;
    const subarrayStartIndices = [];

    for (let i = 0; i < arr.length; i++) {
        cumulativeSum += arr[i];

        if (cumulativeSum - sum >= 0 && cumulativeSumToIndex[cumulativeSum - sum]) {
            subarrayStartIndices.push(cumulativeSumToIndex[cumulativeSum - sum]);
        }

        cumulativeSumToIndex[cumulativeSum] = i;
    }

    return subarrayStartIndices;
}
```

Time complexity: O(n), where n is the length of the array.
Space complexity: O(n), as we are using a hash map to store the cumulative sum and its index.