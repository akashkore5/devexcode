---
id: "880847"
title: "Search for Subarray"
slug: "search-for-subarray"
difficulty: "Medium"
companyTags: []
tags: []
---

# Search for Subarray
## Slug: search-for-subarray
## Difficulty: Medium
## Id: 880847
## Topic Tags: None
## Company Tags: None

### Summary
Given an array of integers and a target sum, find all subarrays that have the given sum. The problem is similar to the well-known "Subarray Sum" problem, but with the additional requirement to return all subarrays that satisfy the condition.

### Detailed Explanation
To solve this problem, we can use a combination of hash tables and dynamic programming. Here's a step-by-step breakdown of the solution:

1. Initialize an empty hash table (e.g., HashMap in Java or Python dictionary) to store the cumulative sum and its corresponding index.
2. Iterate through the array, calculating the cumulative sum at each position. For each cumulative sum, check if it equals the target sum.
3. If the cumulative sum equals the target sum, add the current index and all previous indices (calculated using the hash table) to a list of results.
4. Continue iterating through the array until the end is reached.

Here's an ASCII art diagram illustrating the algorithm:
```
  +---------------+
  |  Input Array  |
  +---------------+
           |
           v
  +-----------------------+
  |  Cumulative Sum    |
  |  Hash Table         |
  +-----------------------+
           |
           v
  +---------------------------------+
  |  Iterate through array, checking  |
  |  cumulative sum and target sum   |
  +---------------------------------+
```
The time complexity of this solution is O(n), where n is the length of the input array. The space complexity is also O(n) due to the hash table.

### Optimized Solutions

#### Java
```java
import java.util.HashMap;
import java.util.Map;

public class SearchForSubarray {
    public static List<Integer[]> findSubarrays(int[] arr, int targetSum) {
        Map<Integer, Integer> cumulativeSumMap = new HashMap<>();
        List<Integer[]> results = new ArrayList<>();

        int cumulativeSum = 0;
        for (int i = 0; i < arr.length; i++) {
            cumulativeSum += arr[i];
            if (cumulativeSum == targetSum) {
                results.add(new Integer[]{i, cumulativeSum});
            }
            if (cumulativeSumMap.containsKey(cumulativeSum - targetSum)) {
                int start = cumulativeSumMap.get(cumulativeSum - targetSum);
                for (int j = start; j <= i; j++) {
                    results.add(new Integer[]{j, cumulativeSum});
                }
            }
            cumulativeSumMap.put(cumulativeSum, i);
        }

        return results;
    }
}
```

#### Python
```python
def find_subarrays(arr, target_sum):
    cumulative_sum_map = {}
    results = []

    cumulative_sum = 0
    for i in range(len(arr)):
        cumulative_sum += arr[i]
        if cumulative_sum == target_sum:
            results.append([i, cumulative_sum])
        if cumulative_sum_map.get(cumulative_sum - target_sum) is not None:
            start = cumulative_sum_map[cumulative_sum - target_sum]
            for j in range(start, i + 1):
                results.append([j, cumulative_sum])
        cumulative_sum_map[cumulative_sum] = i

    return results
```

#### C++
```cpp
#include <unordered_map>
#include <vector>

std::vector<std::vector<int>> findSubarrays(std::vector<int>& arr, int targetSum) {
    std::unordered_map<int, int> cumulativeSumMap;
    std::vector<std::vector<int>> results;

    int cumulativeSum = 0;
    for (int i = 0; i < arr.size(); i++) {
        cumulativeSum += arr[i];
        if (cumulativeSum == targetSum) {
            results.push_back({i, cumulativeSum});
        }
        if (cumulativeSumMap.find(cumulativeSum - targetSum) != cumulativeSumMap.end()) {
            int start = cumulativeSumMap[cumulativeSum - targetSum];
            for (int j = start; j <= i; j++) {
                results.push_back({j, cumulativeSum});
            }
        }
        cumulativeSumMap[cumulativeSum] = i;
    }

    return results;
}
```

#### JavaScript
```javascript
function findSubarrays(arr, targetSum) {
  const cumulativeSumMap = {};
  let results = [];

  let cumulativeSum = 0;
  for (let i = 0; i < arr.length; i++) {
    cumulativeSum += arr[i];
    if (cumulativeSum === targetSum) {
      results.push([i, cumulativeSum]);
    }
    if (cumulativeSumMap[cumulativeSum - targetSum]) {
      let start = cumulativeSumMap[cumulativeSum - targetSum];
      for (let j = start; j <= i; j++) {
        results.push([j, cumulativeSum]);
      }
    }
    cumulativeSumMap[cumulativeSum] = i;
  }

  return results;
}
```