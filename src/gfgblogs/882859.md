---
id: "882859"
title: "Count all triplets with given sum in sorted array"
slug: "count-all-triplets-with-given-sum-in-sorted-array"
difficulty: "Medium"
companyTags: []
tags: ["two-pointer-algorithm", "Hash"]
---

Here is a detailed Markdown blog post for the problem "Count all triplets with given sum in sorted array":

# Count all triplets with given sum in sorted array
## Summary
Given an array of integers, count the number of triplets that have a specific sum. The array is already sorted.

This problem involves using the two-pointer algorithm and hash to solve the problem efficiently. The key concept involved is finding pairs of elements that add up to a certain value.

## Detailed Explanation

To solve this problem, we will use the two-pointer technique along with a hash set to keep track of the elements we have seen so far.

Here's the step-by-step breakdown:

1. Initialize three pointers: `i`, `j` and `k`. All are initially at the start of the array.
2. Initialize a variable `count` to store the count of triplets that sum up to the target value.
3. Iterate through the array with pointer `i`.
4. For each element, calculate the target value minus the current element (`target - arr[i]`). This will be our target sum for the remaining elements.
5. Use pointer `j` to find the first occurrence of this target sum in the hash set. If we haven't seen this sum before, add it to the hash set and move `j` to the next element.
6. Move pointer `k` until we have found a pair that sums up to the target value minus the current element (`arr[j] + arr[k] == target - arr[i]`). The number of such pairs is equal to the count of triplets that sum up to the target value.
7. Increment the `count` variable by the count of triplets and move all three pointers.

Time complexity: O(n^2)
Space complexity: O(n)

## Optimized Solutions

### Java
```java
import java.util.HashMap;
import java.util.Map;

public class CountTriplets {
    public static int countTriplets(int[] arr, int target) {
        Map<Integer, Integer> map = new HashMap<>();
        int count = 0;
        
        for (int i = 0; i < arr.length; i++) {
            int targetSum = target - arr[i];
            if (map.containsKey(targetSum)) {
                int jIndex = map.get(targetSum);
                while (jIndex < i) {
                    count += jIndex + 1;
                    jIndex++;
                }
            } else {
                map.put(arr[i], i);
            }
        }
        
        return count;
    }
}
```

### Python
```python
def count_triplets(arr, target):
    hashmap = {}
    count = 0
    
    for i in range(len(arr)):
        target_sum = target - arr[i]
        if target_sum in hashmap:
            j_index = hashmap[target_sum]
            while j_index < i:
                count += j_index + 1
                j_index += 1
        else:
            hashmap[arr[i]] = i
    
    return count
```

### C++
```cpp
#include <unordered_map>

int countTriplets(int arr[], int n, int target) {
    unordered_map<int, int> map;
    int count = 0;
    
    for (int i = 0; i < n; i++) {
        int targetSum = target - arr[i];
        if (map.find(targetSum) != map.end()) {
            int jIndex = map[targetSum];
            while (jIndex < i) {
                count += jIndex + 1;
                jIndex++;
            }
        } else {
            map[arr[i]] = i;
        }
    }
    
    return count;
}
```

### JavaScript
```javascript
function countTriplets(arr, target) {
    let hashmap = new Map();
    let count = 0;
    
    for (let i = 0; i < arr.length; i++) {
        let targetSum = target - arr[i];
        if (hashmap.has(targetSum)) {
            let jIndex = hashmap.get(targetSum);
            while (jIndex < i) {
                count += jIndex + 1;
                jIndex++;
            }
        } else {
            hashmap.set(arr[i], i);
        }
    }
    
    return count;
}
```

I hope this helps! Let me know if you have any questions or need further clarification.