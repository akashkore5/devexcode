---
id: "878151"
title: "Last Moment Before All Ants Fall Out of a Plank"
slug: "last-moment-before-all-ants-fall-out-of-a-plank"
difficulty: "Medium"
companyTags: []
tags: []
---

# Last Moment Before All Ants Fall Out of a Plank
## Summary
A group of ants are standing on a plank, and they start moving towards one end. The plank is represented as an array where the position at index `i` represents the number of ants currently at that point. We need to find the maximum number of ants that can be on the plank at any given moment before all ants fall off the plank.

## Detailed Explanation
The problem can be solved by using a greedy algorithm, which means we always choose the option that looks best at the time and hope it doesn't make things worse in the long run. The goal is to maximize the number of ants on the plank at any given moment.

Here's the step-by-step breakdown:

1. Initialize a variable `max_ants` to 0, which will store the maximum number of ants that can be on the plank.
2. Iterate over the array from left to right (from index 0 to length-1).
3. For each position `i`, calculate the number of ants that can be added to this position without exceeding the maximum capacity of the plank (`max_ants`). This is done by subtracting the current number of ants at position `i` from the plank's maximum capacity.
4. Update `max_ants` with the maximum value between its current value and the calculated value in step 3.
5. Continue this process until all ants have fallen off the plank.

The time complexity for this solution is O(n), where n is the length of the plank, as we are iterating over the array once. The space complexity is O(1), as we are only using a constant amount of space to store `max_ants`.

## Optimized Solutions
### Java
```java
public int lastMoment(int[] ants) {
    int max_ants = 0;
    for (int i = 0; i < ants.length; i++) {
        int ants_at_position = ants[i];
        max_ants = Math.max(max_ants, ants.length - i - 1);
        if (max_ants >= ants_at_position) {
            break;
        }
    }
    return max_ants;
}
```

### Python
```python
def last_moment(ants):
    max_ants = 0
    for i in range(len(ants)):
        ants_at_position = ants[i]
        max_ants = max(max_ants, len(ants) - i - 1)
        if max_ants >= ants_at_position:
            break
    return max_ants
```

### C++
```cpp
int lastMoment(int* ants, int n) {
    int max_ants = 0;
    for (int i = 0; i < n; i++) {
        int ants_at_position = ants[i];
        max_ants = std::max(max_ants, n - i - 1);
        if (max_ants >= ants_at_position) {
            break;
        }
    }
    return max_ants;
}
```

### JavaScript
```javascript
function lastMoment(ants) {
    let max_ants = 0;
    for (let i = 0; i < ants.length; i++) {
        const antsAtPosition = ants[i];
        max_ants = Math.max(max_ants, ants.length - i - 1);
        if (max_ants >= antsAtPosition) {
            break;
        }
    }
    return max_ants;
}
```