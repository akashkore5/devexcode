---
id: "710023"
title: "Compute Before Matrix"
slug: "compute-before-matrix--170637"
difficulty: "Medium"
companyTags: ["Dunzo"]
tags: ["prefix-sum", "Matrix", "Data Structures", "Algorithms"]
---

**Compute Before Matrix**
=====================

### Summary
Given a matrix, compute all prefix sums along each row and column. The problem involves manipulating a 2D array to store cumulative sums for both rows and columns.

### Detailed Explanation
To solve this problem, we can use a simple algorithm that iterates through the matrix and calculates the prefix sum for each row and column. We start by initializing an empty 2D array `prefix_sum` with the same dimensions as the input matrix. Then, we iterate through each element of the original matrix, adding it to the corresponding row and column in `prefix_sum`.

Here's a step-by-step breakdown:

1. Initialize `prefix_sum` with zeros.
2. Iterate through each element `(i, j)` in the original matrix:
   - Add the current element to the `i-th` row of `prefix_sum`.
   - Add the current element to the `j-th` column of `prefix_sum`.
3. Return `prefix_sum`.

The time complexity for this algorithm is O(m * n), where m and n are the number of rows and columns in the matrix, respectively. The space complexity is also O(m * n) because we need to store the prefix sums.

### Optimized Solutions

#### Java
```java
public int[][] computeBeforeMatrix(int[][] matrix) {
    int m = matrix.length;
    int n = matrix[0].length;
    int[][] prefix_sum = new int[m][n];

    for (int i = 0; i < m; i++) {
        for (int j = 0; j < n; j++) {
            prefix_sum[i][j] += matrix[i][j];
            if (i > 0) {
                prefix_sum[i][j] += prefix_sum[i - 1][j];
            }
            if (j > 0) {
                prefix_sum[i][j] += prefix_sum[i][j - 1];
            }
        }
    }

    return prefix_sum;
}
```

#### Python
```python
def compute_before_matrix(matrix):
    m, n = len(matrix), len(matrix[0])
    prefix_sum = [[0] * (n + 1) for _ in range(m + 1)]

    for i in range(1, m + 1):
        for j in range(1, n + 1):
            prefix_sum[i][j] += matrix[i - 1][j - 1]
            if i > 0:
                prefix_sum[i][j] += prefix_sum[i - 1][j]
            if j > 0:
                prefix_sum[i][j] += prefix_sum[i][j - 1]

    return [row[1:] for row in prefix_sum[1:]]
```

#### C++
```cpp
#include <vector>
using namespace std;

vector<vector<int>> computeBeforeMatrix(vector<vector<int>>& matrix) {
    int m = matrix.size();
    int n = matrix[0].size();
    vector<vector<int>> prefix_sum(m + 1, vector<int>(n + 1, 0));

    for (int i = 1; i <= m; i++) {
        for (int j = 1; j <= n; j++) {
            prefix_sum[i][j] += matrix[i - 1][j - 1];
            if (i > 0) {
                prefix_sum[i][j] += prefix_sum[i - 1][j];
            }
            if (j > 0) {
                prefix_sum[i][j] += prefix_sum[i][j - 1];
            }
        }
    }

    return vector<vector<int>>(prefix_sum.begin() + 1, prefix_sum.end() - 1);
}
```

#### JavaScript
```javascript
function computeBeforeMatrix(matrix) {
    const m = matrix.length;
    const n = matrix[0].length;
    let prefixSum = new Array(m + 1).fill(0).map(() => new Array(n + 1).fill(0));

    for (let i = 1; i <= m; i++) {
        for (let j = 1; j <= n; j++) {
            prefixSum[i][j] += matrix[i - 1][j - 1];
            if (i > 0) {
                prefixSum[i][j] += prefixSum[i - 1][j];
            }
            if (j > 0) {
                prefixSum[i][j] += prefixSum[i][j - 1];
            }
        }
    }

    return prefixSum.slice(1, m + 1).map(row => row.slice(1));
}
```