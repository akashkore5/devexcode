---
id: "702760"
title: "Sum of Middle elements of two sorted arrays"
slug: "sum-of-middle-elements-of-two-sorted-arrays2305"
difficulty: "Medium"
companyTags: ["Amazon", "D-E-Shaw"]
tags: ["Arrays", "Divide and Conquer", "Binary Search"]
---

**Sum of Middle elements of two sorted arrays**
==================================================

## Summary
Given two sorted arrays, find the sum of their middle elements. If one array has an even length and the other has an odd length, consider the average of the middle elements in the longer array.

This problem involves arrays, divide and conquer, and binary search concepts.

## Detailed Explanation
The approach to this problem is to use a combination of divide and conquer along with binary search. First, find the middle index of both arrays. Then, perform a binary search on one array to find the closest element to the middle index in that array. Repeat the process for the other array.

Here's a step-by-step breakdown:

1. Calculate the middle indices of both arrays.
2. Perform a binary search on the first array to find the closest element to the middle index.
3. Perform a similar binary search on the second array to find the closest element to the middle index.
4. Add the two found elements together.

Here's an ASCII art diagram illustrating the process:

```
Array 1: [1, 2, 3, 4]
          ^

Middle index: 2
Binary search result: 3 (since 3 is closer to 2 than 1 or 4)

Array 2: [5, 6, 7, 8, 9]
          ^

Middle index: 3
Binary search result: 7 (since 7 is closer to 3 than 5, 6, 8, or 9)
```

Time complexity: O(log(m) + log(n)) where m and n are the lengths of the two arrays.
Space complexity: O(1)

## Optimized Solutions
### Java
```java
public int sumMiddleElements(int[] arr1, int[] arr2) {
    int mid1 = arr1.length / 2;
    int mid2 = arr2.length / 2;

    int left1 = binarySearch(arr1, mid1);
    int right1 = binarySearch(arr1, mid1 + 1);

    int left2 = binarySearch(arr2, mid2);
    int right2 = binarySearch(arr2, mid2 + 1);

    return Math.max(left1, right1) + Math.max(left2, right2);
}

private int binarySearch(int[] arr, int target) {
    int low = 0;
    int high = arr.length - 1;

    while (low <= high) {
        int mid = low + (high - low) / 2;

        if (arr[mid] == target) {
            return mid;
        } else if (arr[mid] < target) {
            low = mid + 1;
        } else {
            high = mid - 1;
        }
    }

    return Math.min(low, high);
}
```

### Python
```python
def sum_middle_elements(arr1, arr2):
    mid1 = len(arr1) // 2
    mid2 = len(arr2) // 2

    left1 = binary_search(arr1, mid1)
    right1 = binary_search(arr1, mid1 + 1)

    left2 = binary_search(arr2, mid2)
    right2 = binary_search(arr2, mid2 + 1)

    return max(left1, right1) + max(left2, right2)


def binary_search(arr, target):
    low = 0
    high = len(arr) - 1

    while low <= high:
        mid = (low + high) // 2

        if arr[mid] == target:
            return mid
        elif arr[mid] < target:
            low = mid + 1
        else:
            high = mid - 1

    return min(low, high)
```

### C++
```cpp
int sumMiddleElements(int* arr1, int size1, int* arr2, int size2) {
    int mid1 = size1 / 2;
    int mid2 = size2 / 2;

    int left1 = binarySearch(arr1, mid1);
    int right1 = binarySearch(arr1, mid1 + 1);

    int left2 = binarySearch(arr2, mid2);
    int right2 = binarySearch(arr2, mid2 + 1);

    return std::max(left1, right1) + std::max(left2, right2);
}

int binarySearch(int* arr, int target) {
    int low = 0;
    int high = size - 1;

    while (low <= high) {
        int mid = low + (high - low) / 2;

        if (arr[mid] == target) {
            return mid;
        } else if (arr[mid] < target) {
            low = mid + 1;
        } else {
            high = mid - 1;
        }
    }

    return std::min(low, high);
}
```

### JavaScript
```javascript
function sumMiddleElements(arr1, arr2) {
    const mid1 = Math.floor(arr1.length / 2);
    const mid2 = Math.floor(arr2.length / 2);

    const left1 = binarySearch(arr1, mid1);
    const right1 = binarySearch(arr1, mid1 + 1);

    const left2 = binarySearch(arr2, mid2);
    const right2 = binarySearch(arr2, mid2 + 1);

    return Math.max(left1, right1) + Math.max(left2, right2);
}

function binarySearch(arr, target) {
    let low = 0;
    let high = arr.length - 1;

    while (low <= high) {
        const mid = Math.floor((low + high) / 2);

        if (arr[mid] === target) {
            return mid;
        } else if (arr[mid] < target) {
            low = mid + 1;
        } else {
            high = mid - 1;
        }
    }

    return Math.min(low, high);
}
```

Note that the binary search function is implemented separately for each language.