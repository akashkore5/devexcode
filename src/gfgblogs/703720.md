---
id: "703720"
title: "Count divisors of product of array elements"
slug: "count-divisors-of-product-of-array-elements0244"
difficulty: "Medium"
companyTags: []
tags: ["Arrays", "Prime Number", "Data Structures"]
---

**Count Divisors of Product of Array Elements**
==========================================

### Summary
Given an array of integers, count the number of divisors for the product of all elements in the array. The problem involves arrays and prime numbers.

### Detailed Explanation
To solve this problem, we will first calculate the product of all elements in the array. Then, we will find the divisors for this product. A divisor is a number that can be divided by another number without leaving a remainder. To efficiently count the divisors, we will use the concept of prime factorization.

Here's a step-by-step breakdown of the solution:

1. Calculate the product of all elements in the array.
2. Find the prime factors of this product using a prime factorization algorithm (e.g., trial division or Sieve of Eratosthenes).
3. For each prime factor, calculate its exponents in the prime factorization.
4. Use these exponents to count the number of divisors for the product.

### Optimized Solutions
#### Java
```java
import java.util.Scanner;

public class Main {
    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        int n = scanner.nextInt();
        long product = 1;
        for (int i = 0; i < n; i++) {
            product *= scanner.nextInt();
        }
        int count = countDivisors(product);
        System.out.println(count);
    }

    public static int countDivisors(long product) {
        int count = 1;
        long p = 2;
        while (p * p <= product) {
            int power = 0;
            while (product % p == 0) {
                product /= p;
                power++;
            }
            if (power > 0) {
                for (int i = 0; i <= power; i++) {
                    count++;
                }
            }
            p++;
        }
        if (product > 1) {
            count += 2;
        } else if (product == 1) {
            count = 1;
        }
        return count;
    }
}
```

#### Python
```python
def main():
    n = int(input())
    product = 1
    for _ in range(n):
        product *= int(input())
    print(count_divisors(product))

def count_divisors(product):
    count = 1
    p = 2
    while p * p <= product:
        power = 0
        while product % p == 0:
            product //= p
            power += 1
        if power > 0:
            for i in range(power + 1):
                count += 1
        p += 1
    if product > 1:
        count += 2
    elif product == 1:
        count = 1
    return count

if __name__ == "__main__":
    main()
```

#### C++
```cpp
#include <iostream>
using namespace std;

long long product(int arr[], int n) {
    long long p = 1;
    for (int i = 0; i < n; i++) {
        p *= arr[i];
    }
    return p;
}

int countDivisors(long long product) {
    int count = 1;
    long long p = 2;
    while (p * p <= product) {
        int power = 0;
        while (product % p == 0) {
            product /= p;
            power++;
        }
        if (power > 0) {
            for (int i = 0; i <= power; i++) {
                count++;
            }
        }
        p++;
    }
    if (product > 1) {
        count += 2;
    } else if (product == 1) {
        count = 1;
    }
    return count;

int main() {
    int n;
    cin >> n;
    int arr[n];
    for (int i = 0; i < n; i++) {
        cin >> arr[i];
    }
    long long p = product(arr, n);
    cout << countDivisors(p) << endl;
    return 0;
}
```

#### JavaScript
```javascript
function main() {
    let n = parseInt(readLine());
    let product = 1;
    for (let i = 0; i < n; i++) {
        product *= parseInt(readLine());
    }
    console.log(countDivisors(product));
}

function countDivisors(product) {
    let count = 1;
    let p = 2;
    while (p * p <= product) {
        let power = 0;
        while (product % p == 0) {
            product /= p;
            power++;
        }
        if (power > 0) {
            for (let i = 0; i <= power; i++) {
                count++;
            }
        }
        p++;
    }
    if (product > 1) {
        count += 2;
    } else if (product == 1) {
        count = 1;
    }
    return count;

main();
```